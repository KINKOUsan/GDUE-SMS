# GDUE-SMS 学生管理系统接口文档

## 1. 接口概述

### 1.1 接口规范
- **协议**: HTTP/HTTPS
- **数据格式**: JSON
- **字符编码**: UTF-8
- **设计风格**: RESTful API

### 1.2 基础URL
- **开发环境**: `http://localhost:8080`
- **生产环境**: 根据实际部署配置

### 1.3 通用响应格式

所有接口统一返回以下JSON格式：

```json
{
  "code": 1,
  "msg": "success",
  "data": {}
}
```

**字段说明**:

| 字段名 | 类型 | 说明 |
|--------|------|------|
| code | Integer | 响应码，1表示成功，0表示失败 |
| msg | String | 响应消息，成功时为"success"，失败时为错误信息 |
| data | Object | 响应数据，成功时返回具体数据，失败时为null |

### 1.4 HTTP状态码

| 状态码 | 说明 |
|--------|------|
| 200 | 请求成功 |
| 400 | 请求参数错误 |
| 404 | 资源不存在 |
| 500 | 服务器内部错误 |

### 1.5 错误码说明

| 错误码 | 说明 |
|--------|------|
| 1 | 操作成功 |
| 0 | 操作失败 |

---

## 2. 学生管理接口

### 2.1 分页查询学生列表

**接口描述**: 根据条件分页查询学生信息

**请求URL**: `/student`

**请求方法**: `GET`

**请求参数**:

| 参数名 | 类型 | 必填 | 说明 | 示例 |
|--------|------|------|------|------|
| page | Integer | 否 | 页码，默认1 | 1 |
| pageSize | Integer | 否 | 每页记录数，默认10 | 10 |
| name | String | 否 | 学生姓名（模糊查询） | 张三 |
| majorId | Long | 否 | 专业ID | 1 |

**请求示例**:
```http
GET /student?page=1&pageSize=10&name=张&majorId=1
```

**响应示例**:
```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "total": 100,
    "rows": [
      {
        "id": 1,
        "name": "张三",
        "studentId": "2024001",
        "gender": "男",
        "age": 20,
        "majorId": 1,
        "score": 85.5,
        "majorName": "计算机科学与技术"
      },
      {
        "id": 2,
        "name": "张四",
        "studentId": "2024002",
        "gender": "女",
        "age": 19,
        "majorId": 1,
        "score": 90.0,
        "majorName": "计算机科学与技术"
      }
    ]
  }
}
```

**响应数据说明**:

| 字段名 | 类型 | 说明 |
|--------|------|------|
| total | Long | 总记录数 |
| rows | Array | 当前页数据列表 |

**Student对象说明**:

| 字段名 | 类型 | 说明 |
|--------|------|------|
| id | Integer | 学生ID |
| name | String | 学生姓名 |
| studentId | String | 学号 |
| gender | String | 性别（男/女） |
| age | Integer | 年龄 |
| majorId | Long | 专业ID |
| score | Double | 分数 |
| majorName | String | 专业名称（关联查询） |

---

### 2.2 根据ID查询学生

**接口描述**: 根据学生ID查询学生详细信息

**请求URL**: `/student/{id}`

**请求方法**: `GET`

**路径参数**:

| 参数名 | 类型 | 必填 | 说明 | 示例 |
|--------|------|------|------|------|
| id | Integer | 是 | 学生ID | 1 |

**请求示例**:
```http
GET /student/1
```

**响应示例**:
```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "id": 1,
    "name": "张三",
    "studentId": "2024001",
    "gender": "男",
    "age": 20,
    "majorId": 1,
    "score": 85.5,
    "majorName": "计算机科学与技术"
  }
}
```

---

### 2.3 新增学生

**接口描述**: 新增学生信息

**请求URL**: `/student`

**请求方法**: `POST`

**请求头**:
```
Content-Type: application/json
```

**请求体**:

| 字段名 | 类型 | 必填 | 说明 | 示例 |
|--------|------|------|------|------|
| name | String | 是 | 学生姓名 | 张三 |
| studentId | String | 是 | 学号 | 2024001 |
| gender | String | 是 | 性别（男/女） | 男 |
| age | Integer | 是 | 年龄（1-100） | 20 |
| majorId | Long | 是 | 专业ID | 1 |
| score | Double | 是 | 分数（0-100） | 85.5 |

**请求示例**:
```json
{
  "name": "张三",
  "studentId": "2024001",
  "gender": "男",
  "age": 20,
  "majorId": 1,
  "score": 85.5
}
```

**响应示例**:
```json
{
  "code": 1,
  "msg": "success",
  "data": null
}
```

---

### 2.4 修改学生

**接口描述**: 修改学生信息

**请求URL**: `/student`

**请求方法**: `PUT`

**请求头**:
```
Content-Type: application/json
```

**请求体**:

| 字段名 | 类型 | 必填 | 说明 | 示例 |
|--------|------|------|------|------|
| id | Integer | 是 | 学生ID | 1 |
| name | String | 否 | 学生姓名 | 张三 |
| studentId | String | 否 | 学号 | 2024001 |
| gender | String | 否 | 性别（男/女） | 男 |
| age | Integer | 否 | 年龄（1-100） | 20 |
| majorId | Long | 否 | 专业ID | 1 |
| score | Double | 否 | 分数（0-100） | 85.5 |

**请求示例**:
```json
{
  "id": 1,
  "name": "张三",
  "studentId": "2024001",
  "gender": "男",
  "age": 21,
  "majorId": 1,
  "score": 88.0
}
```

**响应示例**:
```json
{
  "code": 1,
  "msg": "success",
  "data": null
}
```

---

### 2.5 删除学生

**接口描述**: 根据学生ID删除学生信息

**请求URL**: `/student/{id}`

**请求方法**: `DELETE`

**路径参数**:

| 参数名 | 类型 | 必填 | 说明 | 示例 |
|--------|------|------|------|------|
| id | Integer | 是 | 学生ID | 1 |

**请求示例**:
```http
DELETE /student/1
```

**响应示例**:
```json
{
  "code": 1,
  "msg": "success",
  "data": null
}
```

---

## 3. 专业管理接口

### 3.1 分页查询专业列表

**接口描述**: 根据条件分页查询专业信息

**请求URL**: `/major`

**请求方法**: `GET`

**请求参数**:

| 参数名 | 类型 | 必填 | 说明 | 示例 |
|--------|------|------|------|------|
| page | Integer | 否 | 页码，默认1 | 1 |
| pageSize | Integer | 否 | 每页记录数，默认10 | 10 |
| name | String | 否 | 专业名称（模糊查询） | 计算机 |

**请求示例**:
```http
GET /major?page=1&pageSize=10&name=计算机
```

**响应示例**:
```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "total": 10,
    "rows": [
      {
        "id": 1,
        "name": "计算机科学与技术"
      },
      {
        "id": 2,
        "name": "软件工程"
      }
    ]
  }
}
```

**响应数据说明**:

| 字段名 | 类型 | 说明 |
|--------|------|------|
| total | Long | 总记录数 |
| rows | Array | 当前页数据列表 |

**Major对象说明**:

| 字段名 | 类型 | 说明 |
|--------|------|------|
| id | Long | 专业ID |
| name | String | 专业名称 |

---

### 3.2 根据ID查询专业

**接口描述**: 根据专业ID查询专业详细信息

**请求URL**: `/major/{id}`

**请求方法**: `GET`

**路径参数**:

| 参数名 | 类型 | 必填 | 说明 | 示例 |
|--------|------|------|------|------|
| id | Long | 是 | 专业ID | 1 |

**请求示例**:
```http
GET /major/1
```

**响应示例**:
```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "id": 1,
    "name": "计算机科学与技术"
  }
}
```

---

### 3.3 新增专业

**接口描述**: 新增专业信息

**请求URL**: `/major`

**请求方法**: `POST`

**请求头**:
```
Content-Type: application/json
```

**请求体**:

| 字段名 | 类型 | 必填 | 说明 | 示例 |
|--------|------|------|------|------|
| name | String | 是 | 专业名称 | 计算机科学与技术 |

**请求示例**:
```json
{
  "name": "计算机科学与技术"
}
```

**响应示例**:
```json
{
  "code": 1,
  "msg": "success",
  "data": null
}
```

---

### 3.4 修改专业

**接口描述**: 修改专业信息

**请求URL**: `/major`

**请求方法**: `PUT`

**请求头**:
```
Content-Type: application/json
```

**请求体**:

| 字段名 | 类型 | 必填 | 说明 | 示例 |
|--------|------|------|------|------|
| id | Long | 是 | 专业ID | 1 |
| name | String | 否 | 专业名称 | 计算机科学与技术 |

**请求示例**:
```json
{
  "id": 1,
  "name": "计算机科学与技术"
}
```

**响应示例**:
```json
{
  "code": 1,
  "msg": "success",
  "data": null
}
```

---

### 3.5 删除专业

**接口描述**: 根据专业ID删除专业信息

**请求URL**: `/major/{id}`

**请求方法**: `DELETE`

**路径参数**:

| 参数名 | 类型 | 必填 | 说明 | 示例 |
|--------|------|------|------|------|
| id | Long | 是 | 专业ID | 1 |

**请求示例**:
```http
DELETE /major/1
```

**响应示例**:
```json
{
  "code": 1,
  "msg": "success",
  "data": null
}
```

---

## 4. 接口调用示例

### 4.1 使用cURL调用

#### 查询学生列表
```bash
curl -X GET "http://localhost:8080/student?page=1&pageSize=10"
```

#### 新增学生
```bash
curl -X POST "http://localhost:8080/student" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "张三",
    "studentId": "2024001",
    "gender": "男",
    "age": 20,
    "majorId": 1,
    "score": 85.5
  }'
```

#### 修改学生
```bash
curl -X PUT "http://localhost:8080/student" \
  -H "Content-Type: application/json" \
  -d '{
    "id": 1,
    "name": "张三",
    "studentId": "2024001",
    "gender": "男",
    "age": 21,
    "majorId": 1,
    "score": 88.0
  }'
```

#### 删除学生
```bash
curl -X DELETE "http://localhost:8080/student/1"
```

#### 查询专业列表
```bash
curl -X GET "http://localhost:8080/major?page=1&pageSize=10"
```

#### 新增专业
```bash
curl -X POST "http://localhost:8080/major" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "计算机科学与技术"
  }'
```

---

### 4.2 使用JavaScript/Axios调用

#### 查询学生列表
```javascript
import axios from 'axios';

axios.get('http://localhost:8080/student', {
  params: {
    page: 1,
    pageSize: 10,
    name: '张',
    majorId: 1
  }
})
.then(response => {
  console.log(response.data);
})
.catch(error => {
  console.error(error);
});
```

#### 新增学生
```javascript
axios.post('http://localhost:8080/student', {
  name: '张三',
  studentId: '2024001',
  gender: '男',
  age: 20,
  majorId: 1,
  score: 85.5
})
.then(response => {
  console.log(response.data);
})
.catch(error => {
  console.error(error);
});
```

#### 修改学生
```javascript
axios.put('http://localhost:8080/student', {
  id: 1,
  name: '张三',
  studentId: '2024001',
  gender: '男',
  age: 21,
  majorId: 1,
  score: 88.0
})
.then(response => {
  console.log(response.data);
})
.catch(error => {
  console.error(error);
});
```

#### 删除学生
```javascript
axios.delete('http://localhost:8080/student/1')
.then(response => {
  console.log(response.data);
})
.catch(error => {
  console.error(error);
});
```

---

## 5. 前端API封装

### 5.1 学生API封装 (student.js)

```javascript
import request from "@/utils/request";

// 查询学生列表数据
export const queryPageApi = (name, majorId, page, pageSize) => {
  let url = `/student?name=${name}&page=${page}&pageSize=${pageSize}`;
  if (majorId !== null && majorId !== undefined) {
    url += `&majorId=${majorId}`;
  }
  return request.get(url);
};

// 根据id查询学生
export const queryByIdApi = (id) => request.get(`/student/${id}`);

// 添加学生
export const addApi = (student) => request.post(`/student`, student);

// 修改学生
export const updateApi = (student) => request.put(`/student`, student);

// 删除学生
export const deleteApi = (id) => request.delete(`/student/${id}`);
```

### 5.2 专业API封装 (major.js)

```javascript
import request from "@/utils/request";

// 查询专业列表数据
export const queryPageApi = (name, page, pageSize) => 
  request.get(`/major?name=${name}&page=${page}&pageSize=${pageSize}`);

// 根据id查询专业
export const queryByIdApi = (id) => request.get(`/major/${id}`);

// 添加专业
export const addApi = (major) => request.post("/major", major);

// 修改专业
export const updateApi = (major) => request.put("/major", major);

// 删除专业
export const deleteApi = (id) => request.delete(`/major/${id}`);
```

---

## 6. 错误处理

### 6.1 常见错误示例

#### 参数错误
```json
{
  "code": 0,
  "msg": "参数错误",
  "data": null
}
```

#### 资源不存在
```json
{
  "code": 0,
  "msg": "学生不存在",
  "data": null
}
```

#### 数据库错误
```json
{
  "code": 0,
  "msg": "数据库操作失败",
  "data": null
}
```

### 6.2 前端错误处理示例

```javascript
axios.get('/student/999')
  .then(response => {
    if (response.data.code === 1) {
      // 成功处理
      console.log('查询成功', response.data.data);
    } else {
      // 业务错误
      ElMessage.error(response.data.msg || '操作失败');
    }
  })
  .catch(error => {
    // 网络错误
    ElMessage.error('网络请求失败，请稍后重试');
    console.error(error);
  });
```

---

## 7. 接口测试工具推荐

### 7.1 Postman
- 下载地址：https://www.postman.com/
- 支持接口测试、集合管理、环境变量等功能

### 7.2 Apifox
- 下载地址：https://www.apifox.cn/
- 支持接口设计、调试、文档生成等功能

### 7.3 Swagger UI
- 如果后端集成了Swagger，可以通过浏览器访问：`http://localhost:8080/swagger-ui.html`

---

## 8. 注意事项

### 8.1 数据验证
- 所有必填字段必须提供
- 数值类型字段必须在指定范围内
- 性别字段只能是"男"或"女"
- 专业ID必须存在于专业表中

### 8.2 分页参数
- page参数必须大于0
- pageSize参数建议在5-100之间
- 分页查询时建议使用索引字段进行筛选

### 8.3 删除操作
- 删除操作不可逆，请谨慎操作
- 删除专业前请确保没有学生关联该专业

### 8.4 性能优化
- 大数据量查询建议使用分页
- 避免频繁调用接口
- 合理使用缓存机制

---

## 9. 版本历史

| 版本 | 日期 | 说明 |
|------|------|------|
| v1.0.0 | 2025-12-26 | 初始版本，包含学生管理和专业管理接口 |

---

## 10. 联系方式

如有接口相关问题，请联系开发团队。
